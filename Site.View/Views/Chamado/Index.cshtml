@model IEnumerable<Site.DTO.Chamado.DTOChamado>

@{
    ViewBag.Title = "Index";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>
    </title>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/Content/jquery.dataTables.css" rel="stylesheet" />
    <link href="~/Content/jquery.dataTables_themeroller.css" rel="stylesheet" />
</head>

    <body>
        
        <br/>
        <br />

        <div class="container">
            
            <p>
                <a href="@Url.Action("Create", "Chamado")" class="btn btn-default">Novo</a>
            </p>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        Chamados
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table" id="tabela">
                        <thead>
                            <tr>
                                <th>
                                    Nº
                                </th>
                                <th>
                                    Data
                                </th>
                                <th>
                                    Sistema
                                </th>
                                <th>
                                    Assunto
                                </th>
                                <th>
                                    Prioridade
                                </th>
                                <th>
                                    Tipo
                                </th>
                                <th>
                                    Pendente com
                                </th>
                                <th>
                                    Status
                                </th>
                                <th width="15%">
                                    Último Comentário
                                </th>
                                <th width="12%">
                                    Ação
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        @item.Id.ToString("D" + 4)
                                    </td>
                                    <td>
                                        @item.Data.ToString("dd/MM/yyyy")
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.DescricaoSistema)
                                    </td>
                                    <td>
                                        @item.Assunto.ToUpper()
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Prioridade)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.TipoChamado)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PendenteCom)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Status)
                                    </td>
                                    <td>
                                        @if (item.DataUltimoComentario > DateTime.MinValue)
                                        {
                                            @item.DataUltimoComentario.ToString("yyyy-MM-dd HH:mm")
                                        }
                                    </td>
                                    <td>
                                        @Html.ActionLink("Editar", "Edit", new { id = item.Id }) |
                                        @Html.ActionLink("Detalhar", "Details", new { id = item.Id })
                                    </td>
                                </tr>
                            }
                            </tbody>
</table>
                </div>
            </div>
        </div>
        <script src="~/Scripts/jquery.js"></script>
        <script src="~/Scripts/jquery.dataTables.js"></script>
        
        <script>
            $(document).ready(function () {
                $('#tabela').DataTable({
                    "order": [[8, "desc"]],
                    "bLengthChange": false,
                    "bSortable": true,
                    'bFilter': false,
                    "oLanguage": {
                        "sProcessing": "Processando...",
                        "sLengthMenu": "Mostrar _MENU_ registros",
                        "sZeroRecords": "Não foram encontrados resultados",
                        "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                        "sInfoEmpty": "Mostrando de 0 até 0 de 0 registros",
                        "sInfoFiltered": "",
                        "sInfoPostFix": "",
                        "sSearch": "Buscar:",
                        "sUrl": "",
                        "oPaginate": {
                            "sFirst": "Primeiro",
                            "sPrevious": "Anterior",
                            "sNext": "Seguinte",
                            "sLast": "Último"
                        }
                    }
                });
            });
        </script>

    </body>
</html>
